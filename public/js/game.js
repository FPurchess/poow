function randInt(t,i){return Math.floor(Math.random()*(i-t+1)+t)}function randChoice(t){return t[Math.floor(Math.random()*t.length)]}Game={width:function(){return Crafty.DOM.window.width},height:function(){return Crafty.DOM.window.height},start:function(){Crafty.init(),Crafty.background("#000 url(public/images/bg-tile.png) center center repeat"),Crafty.scene("Loading")}},$text_css={color:"#ffffff",size:"20px",family:"Orbitron"},Crafty.c("Enemy",{shield:100,score:100,velocity:8,shootDistanceInterval:80,init:function(){this.requires("2D,Canvas,spr_enemy,Collision")},spawn:function(){console.log("Enemy::spawn"),this.attr({x:-this.w,y:Game.height()/2}),this.rotation=90;var t=this;return this.bind("EnterFrame",function(){t.move(),t.shoot()}),this},move:function(){this.x<Game.width()?this.x+=this.velocity:this.die()},shoot:function(){this.x%this.shootDistanceInterval==0&&Crafty.e("EnemyBullet").spawn(this.x,this.y)},die:function(){return this.destroy(),this}}),Crafty.c("EnemyBullet",{velocity:24,init:function(){this.requires("2D,Canvas,spr_bullet,Collision")},spawn:function(t,i){return console.log("Bullet::spawn"),this.attr({x:t,y:i}),this.rotation=90,this.bind("EnterFrame",function(){this.move()}),this},move:function(){this.x<Game.width()?this.x+=this.velocity:this.die()},die:function(){return this.destroy(),this}}),Crafty.c("HUD",{score:0,lives:0,shield:0,init:function(){return this.$_hud=$("#HUD"),this.$_score=$(".hud-score .value",this.$_hud),this.$_lives=$(".hud-lives .value",this.$_hud),this.$_shield=$(".hud-shield .value",this.$_hud),this.reset(),this},reset:function(){return this.setScore(0),this.setLives(0),this.setShield(0),this},hide:function(){return this.$_hud.hide(),this},show:function(){return this.$_hud.show(),this},setScore:function(t){return this.score=t,this.$_score.text(t),this},setLives:function(t){return this.lives=t,this.$_lives.text(t),this},setShield:function(t){return this.shield=t,this.$_shield.text(t),this}}),Crafty.c("Player",{shield:{current:10,max:10},velocity:8,speed:0,angle:0,lives:3,score:0,init:function(){return this.requires("2D,Canvas,spr_player,Keyboard,Collision").origin("center").reset(),this.bind("EnterFrame",function(){this.isDown(Crafty.keys.SPACE)&&console.log("shoot!"),this.isDown(Crafty.keys.LEFT_ARROW)&&(this.angle-=this.velocity),this.isDown(Crafty.keys.RIGHT_ARROW)&&(this.angle+=this.velocity),this.isDown(Crafty.keys.UP_ARROW)&&(this.speed=this.velocity),this.isDown(Crafty.keys.UP_ARROW)&&(this.speed=-this.velocity),this.maneuver()}),console.log("Player::init"),this},maneuver:function(){var t=Crafty.math.degToRad(this.angle+90),i=this.speed*Math.cos(t),e=this.speed*Math.sin(t);this.rotation=this.angle,this.attr({x:this.x+i,y:this.y+e})},reset:function(){return this.shield={current:10,max:10},Crafty.trigger("UpdateStats"),this.attr({x:Crafty.viewport.width/2-this.w/2,y:Crafty.viewport.height/2-this.h/2,w:50,h:50}),this}}),Crafty.audio.add("background_music-01",["public/music/ouroboros.mp3"]),Crafty.audio.add("game_over",["public/fx/game_over.wav"]),Crafty.audio.add("shot",["public/fx/shot.mp3"]),Crafty.scene("Game",function(){this.hud=Crafty.e("HUD"),this.hud.show(),this.player=Crafty.e("Player"),Crafty.audio.play("background_music-01",-1)}),Crafty.scene("Loading",function(){Crafty.e("2D, DOM, Text").text("Loading...").attr({x:0,y:Game.height()/2,w:Game.width()}).textFont($text_css).css({textAlign:"center"}).css($text_css),Crafty.load(["public/images/player.png","public/music/ouroboros.mp3"],function(){Crafty.sprite("public/images/ship1.png",{spr_enemy:[0,0,63,50]}),Crafty.sprite("public/images/ship2.png",{spr_player:[0,0,63,50]}),Crafty.sprite("public/images/bullet.jpg",{spr_bullet:[0,0,50,50]}),Crafty.scene("Game")})});
//# sourceMappingURL=game.js.map